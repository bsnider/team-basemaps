{"version":3,"sources":["../../../src/app/components/datalist.js"],"names":[],"mappings":"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","file":"datalist.js","sourcesContent":["import teamColors from 'dojo/text!../resources/teams.json';\r\nimport baseStyleText from 'dojo/text!../resources/baseStyle.json.txt';\r\nimport dom from 'dojo/dom';\r\nimport domConstruct from 'dojo/dom-construct';\r\nimport on from 'dojo/on';\r\n\r\nfunction create(view, tileLyr) {\r\n    const container = document.createElement('div');\r\n    container.classList.add('item-container');\r\n    const elemList = document.createElement('select');\r\n    elemList.setAttribute('id', 'teamsSelect');\r\n    elemList.classList.add('esri-widget', 'item-list');\r\n    container.appendChild(elemList);\r\n    view.ui.add(elemList, 'top-right');\r\n\r\n    const baseStyle = JSON.parse(baseStyleText);\r\n    const tc = JSON.parse(teamColors);\r\n    populateDropdown(dom.byId('teamsSelect'), tc);\r\n    on(dom.byId('teamsSelect'), 'change', (evt) => {\r\n      if(evt.target.value !== -1) {\r\n        tileLyr.loadStyle(getNewStyle(baseStyle, tc[evt.target.value].colors.hex));\r\n      }\r\n    });\r\n}\r\n\r\nvar populateDropdown = function(dropdown, teamColorsArray) {\r\n    // set an initial version for now, until we can get the layer loaded event.\r\n    var opt = domConstruct.create('option', {\r\n        innerHTML: '&#8681; Change me! &#8681;',\r\n        value: -1\r\n    });\r\n    dropdown.add(opt);\r\n    teamColorsArray.forEach((team, i) => {\r\n        var opt = domConstruct.create('option', {\r\n            innerHTML: team.name,\r\n            value: i\r\n        });\r\n        dropdown.add(opt);\r\n    });\r\n}\r\n\r\nvar getNewStyle = function(baseStyle, colorArray) {\r\n    var retStyle = Object.assign({}, baseStyle);\r\n    if (retStyle && retStyle.hasOwnProperty('layers')) {\r\n\r\n        if (colorArray.length > 0) {\r\n            // do background\r\n            var backgroundLayers = retStyle.layers.filter(function(layer) {\r\n                if (layer.id.indexOf('background') > -1 || layer.id.indexOf('Water area') > -1) {\r\n                    return true;\r\n                }\r\n            });\r\n\r\n            backgroundLayers.forEach(function(backgroundLayer) {\r\n                if (backgroundLayer.paint.hasOwnProperty('background-color')) {\r\n                    backgroundLayer.paint['background-color'] = '#' + colorArray[0];\r\n                }\r\n                if (backgroundLayer.paint.hasOwnProperty('fill-color')) {\r\n                    backgroundLayer.paint['fill-color'] = '#' + colorArray[0];\r\n                }\r\n            });\r\n        }\r\n\r\n        if (colorArray.length > 1) {\r\n            // do land\r\n            var landLayers = retStyle.layers.filter(function(layer) {\r\n                if (layer.id === 'Land') {\r\n                    return true;\r\n                }\r\n            });\r\n\r\n            landLayers.forEach(function(landLayer) {\r\n                if (landLayer.paint.hasOwnProperty('fill-color')) {\r\n                    landLayer.paint['fill-color'] = '#' + colorArray[1];\r\n                }\r\n            });\r\n        }\r\n\r\n        if (colorArray.length > 2) {\r\n            // do other\r\n            var otherLayers = retStyle.layers.filter(function(layer) {\r\n                if (layer.id.indexOf('Building/General') > -1 || layer.id.indexOf('Railroad/2') > -1 || layer.id.indexOf('Railroad/1') > -1 || layer.id.indexOf('Urban area') > -1) {\r\n                    return true;\r\n                }\r\n            });\r\n\r\n            otherLayers.forEach(function(otherLayer) {\r\n                if (otherLayer.paint.hasOwnProperty('background-color')) {\r\n                    otherLayer.paint['background-color'] = '#' + colorArray[2];\r\n                }\r\n                if (otherLayer.paint.hasOwnProperty('fill-color')) {\r\n                    otherLayer.paint['fill-color'] = '#' + colorArray[2];\r\n                }\r\n            });\r\n        }\r\n\r\n    }\r\n    return retStyle;\r\n};\r\n\r\n\r\nexport default Object.freeze({\r\n    create\r\n});\r\n"]}