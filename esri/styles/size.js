// COPYRIGHT Â© 2016 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/4.0/esri/copyright.txt for details.

define(["dojo/_base/array","dojo/_base/lang","../Color"],function(o,a,e){function i(){var o,a,e,i,r,n,t,l;for(o in z){a=z[o],e=a.basemapGroups,r=D[o]={basemaps:[].concat(e.light).concat(e.dark),point:{},polyline:{},polygon:{}};for(i in e)for(n=e[i],t=0;t<n.length;t++)l=n[t],a.pointSchemes&&(r.point[l]=a.pointSchemes[i]),a.lineSchemes&&(r.polyline[l]=a.lineSchemes[i]),a.polygonSchemes&&(r.polygon[l]=a.polygonSchemes[i])}}function r(o,a){var i,r,n;if(o)switch(i={},a){case"point":i.color=new e(o.color),i.noDataColor=new e(o.noDataColor),i.outline={color:new e(o.outline.color),width:o.outline.width},i.size=o.size,i.noDataSize=o.noDataSize,i.minSize=o.minSize,i.maxSize=o.maxSize;break;case"polyline":i.color=new e(o.color),i.noDataColor=new e(o.noDataColor),i.width=o.width,i.noDataWidth=o.noDataWidth,i.minWidth=o.minWidth,i.maxWidth=o.maxWidth;break;case"polygon":r=o.marker,n=o.background,i.marker={color:new e(r.color),noDataColor:new e(r.noDataColor),outline:{color:new e(r.outline.color),width:r.outline.width},size:r.size,noDataSize:r.noDataSize,minSize:r.minSize,maxSize:r.maxSize},i.background={color:new e(n.color),outline:{color:new e(n.outline.color),width:n.outline.width}}}return i}function n(o){var i;return o&&(i=a.mixin({},o),i.color&&(i.color=new e(i.color)),i.noDataColor&&(i.noDataColor=new e(i.noDataColor)),i.outline&&(i.outline={color:i.outline.color&&new e(i.outline.color),width:i.outline.width})),i}function t(o){return o}var l=[128,128,128,1],c=[128,128,128,1],d=[128,128,128,.8],m=[128,128,128,.8],h={primary:{color:[227,139,79,.8],noDataColor:d,outline:{color:[255,255,255,1],width:1},noDataSize:4,size:12,minSize:8,maxSize:50},secondary:[{color:[128,128,128,.8],noDataColor:d,outline:{color:[255,255,255,1],width:1},noDataSize:4,size:12,minSize:8,maxSize:50},{color:[255,255,255,.8],noDataColor:d,outline:{color:[128,128,128,1],width:1},noDataSize:4,size:12,minSize:8,maxSize:50}]},s={primary:{color:[227,139,79,.8],noDataColor:m,outline:{color:[51,51,51,1],width:1},noDataSize:4,size:12,minSize:8,maxSize:50},secondary:[{color:[178,178,178,.8],noDataColor:m,outline:{color:[51,51,51,1],width:1},noDataSize:4,size:12,minSize:8,maxSize:50},{color:[26,26,26,.8],noDataColor:m,outline:{color:[128,128,128,1],width:1},noDataSize:4,size:12,minSize:8,maxSize:50}]},u={r:0,g:0,b:0,a:0},S={color:u,outline:{color:{r:166,g:166,b:166,a:1},width:1}},p={color:u,outline:{color:{r:166,g:166,b:166,a:1},width:1}},z={"default":{name:"default",label:"Default",description:"Default theme for visualizing features by varying their size to show data.",basemapGroups:{light:["streets","gray","topo","terrain","national-geographic","oceans","osm"],dark:["satellite","hybrid","dark-gray"]},pointSchemes:{light:h,dark:s},lineSchemes:{light:{primary:{color:[226,119,40,1],noDataColor:l,noDataWidth:1,width:1,minWidth:1,maxWidth:18},secondary:[{color:[77,77,77,1],noDataColor:l,noDataWidth:1,width:1,minWidth:1,maxWidth:18},{color:[153,153,153,1],noDataColor:l,noDataWidth:1,width:1,minWidth:1,maxWidth:18}]},dark:{primary:{color:[226,119,40,1],noDataColor:c,noDataWidth:1,width:1,minWidth:1,maxWidth:18},secondary:[{color:[255,255,255,1],noDataColor:c,noDataWidth:1,width:1,minWidth:1,maxWidth:18},{color:[153,153,153,1],noDataColor:c,noDataWidth:1,width:1,minWidth:1,maxWidth:18}]}},polygonSchemes:{light:{primary:{marker:h.primary,background:p},secondary:[{marker:h.secondary[0],background:p},{marker:h.secondary[1],background:p}]},dark:{primary:{marker:s.primary,background:S},secondary:[{marker:s.secondary[0],background:S},{marker:s.secondary[1],background:S}]}}}},D={};i();var w={getAvailableThemes:function(a){var e,i,r,n=[];for(e in z)i=z[e],r=D[e],a&&-1===o.indexOf(r.basemaps,a)||n.push({name:i.name,label:i.label,description:i.description,basemaps:r.basemaps.slice(0)});return n},getSchemes:function(a){var e,i,n=a.theme,l=a.basemap,c=t(a.geometryType),d=D[n];return e=d&&d[c],e=e&&e[l],e&&(i={primaryScheme:r(e.primary,c),secondarySchemes:o.map(e.secondary,function(o){return r(o,c)})}),i},cloneScheme:function(o){var a;return o&&(a=n(o),a.marker&&(a.marker=n(a.marker)),a.background&&(a.background=n(a.background))),a}};return w});